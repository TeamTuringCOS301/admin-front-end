{"version":3,"sources":["../../src/pages/conservation-area-create/conservation-area-create.module.ts","../../src/pages/conservation-area-create/conservation-area-create.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACwB;AAUxE;IAAA;IAA+C,CAAC;IAAnC,gCAAgC;QAR5C,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,6FAA0B;aAC3B;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,6FAA0B,CAAC;aACrD;SACF,CAAC;OACW,gCAAgC,CAAG;IAAD,uCAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;ACZe;AACgB;AACpB;AACnB;AAerC;IAWE,oCAAmB,QAAkB,EAAS,IAAU,EAAS,OAAsB,EAAS,SAAoB,EAAS,WAAwB,EAAS,IAAY,EAAS,WAA8B;QAA9L,aAAQ,GAAR,QAAQ,CAAU;QAAS,SAAI,GAAJ,IAAI,CAAM;QAAS,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,gBAAW,GAAX,WAAW,CAAa;QAAS,SAAI,GAAJ,IAAI,CAAQ;QAAS,gBAAW,GAAX,WAAW,CAAmB;QAC/M,IAAI,CAAC,kBAAkB,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,mBAAmB,EAAE,CAAC;QACvE,IAAI,CAAC,YAAY,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;QAClC,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAE5B,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAElB,IAAI,CAAC,QAAQ,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;QACzC,IAAI,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;QACxC,IAAI,CAAC,YAAY,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QAC/D,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;IAC3C,CAAC;IAED,mDAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,2CAA2C,CAAC,CAAC;QACzD,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,4CAAO,GAAP;QACE,IAAI,CAAC,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE;YAC7D,MAAM,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;YAC5B,IAAI,EAAE,EAAE;SACX,CAAC,CAAC;QACH,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAED,wDAAmB,GAAnB;QAAA,iBAcC;QAbD,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,CAAC;YAClC,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;YAC5B,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,kBAAkB,CAAC,mBAAmB,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,EAC/E,UAAC,WAAW,EAAE,MAAM;YACjB,KAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;YAC1B,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC;gBACZ,WAAW,CAAC,OAAO,CAAC,UAAC,UAAU;oBAC7B,KAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBAC1C,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED,uDAAkB,GAAlB,UAAmB,IAAI,EAAE,KAAK;QAA9B,iBAiBC;QAhBC,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAE5B,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,EAAC,EAAE,UAAC,OAAO,EAAE,MAAM;YAChE,EAAE,EAAC,MAAM,KAAK,IAAI,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,EAAC;gBAEhC,KAAI,CAAC,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC;gBAC3C,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;oBAClC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ;oBACtC,GAAG,EAAE,KAAI,CAAC,GAAG;iBACd,CAAC,CAAC;gBACH,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC1B,KAAI,CAAC,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;gBACjD,KAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;YAC1D,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,iDAAY,GAAZ;QACE,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC7C,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAC5B,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC/B,CAAC;QACD,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IACpB,CAAC;IAED,mDAAc,GAAd;QAAA,iBAiBC;QAhBC,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,WAAW,CAAC,kBAAkB,EAAE,CAAC,IAAI,CAAC,UAAC,IAAI;YAC9C,IAAI,GAAG,GAAG;gBACR,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ;gBACzB,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS;aAC3B,CAAC;YACF,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;gBAClC,QAAQ,EAAE,GAAG;gBACb,GAAG,EAAE,KAAI,CAAC,GAAG;gBACb,KAAK,EAAE,YAAY;aACpB,CAAC,CAAC;YACH,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC1B,KAAI,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QAC1B,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,KAAK;YACb,OAAO,CAAC,GAAG,CAAC,wBAAwB,EAAE,KAAK,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAC;IACL,CAAC;IAID,8CAAS,GAAT;QAAA,iBAuGC;QAtGC,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,GAAG,GAAG,6CAA6C,GAAE,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAE,kCAAkC,CAAC;QACxK,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACjB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,kBAAQ;YACnC,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAO,QAAS,CAAC,KAAK,CAAC,CAAC;YAC7C,OAAO,CAAC,GAAG,CAAC,SAAS,GAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/B,IAAI,GAAG,GAAG,EAAE,GAAG,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;YACzE,KAAI,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YAGxB,IAAI,OAAO,GAAG;gBACE,MAAM,EAAE,mBAAmB;gBAC3B,UAAU,EAAE;oBACV;wBACE,MAAM,EAAE,SAAS;wBACjB,UAAU,EAAG;4BACX,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI;4BAC5B,aAAa,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW;yBAC3C;qBACF;iBACF;aACF,CAAC;YAEhB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAGlB,OAAO,CAAC,GAAG,CAAC,qBAAqB,GAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;YACzE,EAAE,EAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,IAAE,CAAC,CAAC,EAAC;gBAC3C,IAAI,MAAM,GAAC,IAAI,KAAK,EAAE,CAAC;gBACvB,IAAI,WAAW,GAAC,IAAI,KAAK,CAAC;gBAC1B,IAAI,CAAC,CAAC;gBACN,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACzC,WAAW,GAAC;wBACV,GAAG,EAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBACxC,GAAG,EAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBACzC,CAAC;oBACF,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;oBACzB,WAAW,GAAC,EAAE,CAAC;gBACjB,CAAC;YACL,CAAC;YAAA,IAAI,EAAC;gBACJ,IAAI,MAAM,GAAC,IAAI,KAAK,EAAE,CAAC;gBACvB,IAAI,WAAW,GAAC,IAAI,KAAK,CAAC;gBAC1B,IAAI,CAAC,CAAC;gBACN,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC5C,WAAW,GAAC;wBACV,GAAG,EAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC3C,GAAG,EAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBAC5C,CAAC;oBACF,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;oBACzB,WAAW,GAAC,EAAE,CAAC;gBACjB,CAAC;YACH,CAAC;YAEC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YAEpB;;;;;;;;;;;;;;;2DAe+C;YAE/C,IAAI,OAAO,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;gBAClC,KAAK,EAAE,MAAM;gBACb,WAAW,EAAE,SAAS;gBACtB,aAAa,EAAE,GAAG;gBAClB,YAAY,EAAE,CAAC;gBACf,SAAS,EAAE,SAAS;gBACpB,WAAW,EAAE,IAAI;gBACjB,QAAQ,EAAE,IAAI;aACf,CAAC,CAAC;YACL,OAAO,CAAC,MAAM,CAAC,KAAI,CAAC,GAAG,CAAC,CAAC;YAEzB;;;;;;;;;;;;aAYC;YACD,yBAAyB;YAGzB,gCAAgC;YAChC,oCAAoC;QACtC,CAAC,CAAC,CAAC;IACL,CAAC;IA5MU,0BAA0B;QAJtC,wEAAS,CAAC;YACT,QAAQ,EAAE,+BAA+B;WACG;SAC7C,CAAC;mCAYiN;OAXtM,0BAA0B,CA8MtC;IAAD,+BAAC;;AAAA;SA9MY,0BAA0B,iB","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ConservationAreaCreatePage } from './conservation-area-create';\n\n@NgModule({\n  declarations: [\n    ConservationAreaCreatePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ConservationAreaCreatePage),\n  ],\n})\nexport class ConservationAreaCreatePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/conservation-area-create/conservation-area-create.module.ts","import { Component, NgZone, Renderer } from '@angular/core';\nimport { IonicPage, NavController, LoadingController, NavParams } from 'ionic-angular';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { Http } from '@angular/http';\n\n/**\n * Generated class for the ConservationAreaCreatePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\ndeclare var google;\n\n@IonicPage()\n@Component({\n  selector: 'page-conservation-area-create',\n  templateUrl: 'conservation-area-create.html',\n})\nexport class ConservationAreaCreatePage {\n\n  map: any;\n  GoogleAutocomplete: any;\n  autocomplete: any;\n  autocompleteItems: any;\n  geocoder: any;\n  markers: any;\n  GooglePlaces: any;\n  loading: any;\n\n  constructor(public renderer: Renderer, public http: Http, public navCtrl: NavController, public navParams: NavParams, public geolocation: Geolocation, public zone: NgZone, public loadingCtrl: LoadingController) {\n    this.GoogleAutocomplete = new google.maps.places.AutocompleteService();\n    this.autocomplete = { input: '' };\n    this.autocompleteItems = [];\n\n    this.markers = [];\n\n    this.geocoder = new google.maps.Geocoder;\n    let elem = document.createElement(\"div\")\n    this.GooglePlaces = new google.maps.places.PlacesService(elem);\n    this.loading = this.loadingCtrl.create();\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ConservationAreaCreatePage');\n    this.initMap();\n  }\n\n  initMap(){\n    this.map = new google.maps.Map(document.getElementById('map'), {\n\t\t    center: { lat: 0.0, lng: 0.0 },\n\t\t      zoom: 12\n    });\n    this.tryGeolocation();\n  }\n\n  updateSearchResults(){\n  if (this.autocomplete.input == '') {\n    this.autocompleteItems = [];\n    return;\n  }\n  this.GoogleAutocomplete.getPlacePredictions({ input: this.autocomplete.input },\n\t(predictions, status) => {\n    this.autocompleteItems = [];\n      this.zone.run(() => {\n        predictions.forEach((prediction) => {\n          this.autocompleteItems.push(prediction);\n        });\n      });\n    });\n  }\n\n  selectSearchResult(item, event){\n    this.clearMarkers();\n    this.autocompleteItems = [];\n\n    this.geocoder.geocode({'placeId': item.place_id}, (results, status) => {\n      if(status === 'OK' && results[0]){\n\n        this.autocomplete.input = item.description;\n        let marker = new google.maps.Marker({\n          position: results[0].geometry.location,\n          map: this.map,\n        });\n        this.markers.push(marker);\n        this.map.setCenter(results[0].geometry.location);\n        this.renderer.invokeElementMethod(event.target, 'blur');\n      }\n    });\n  }\n\n  clearMarkers(){\n    for (var i = 0; i < this.markers.length; i++) {\n      console.log(this.markers[i])\n      this.markers[i].setMap(null);\n    }\n    this.markers = [];\n  }\n\n  tryGeolocation(){\n    this.clearMarkers();\n    this.geolocation.getCurrentPosition().then((resp) => {\n      let pos = {\n        lat: resp.coords.latitude,\n        lng: resp.coords.longitude\n      };\n      let marker = new google.maps.Marker({\n        position: pos,\n        map: this.map,\n        title: 'I am here!'\n      });\n      this.markers.push(marker);\n      this.map.setCenter(pos);\n    }).catch((error) => {\n      console.log('Error getting location', error);\n    });\n  }\n\n\n\n  getBorder(){\n    this.clearMarkers();\n    let url = \"https://nominatim.openstreetmap.org/search/\"+ this.autocomplete.input.substr(0,this.autocomplete.input.indexOf(',') + 1) +\"?format=jsonv2&polygon_geojson=1\";\n    console.log(url);\n    this.http.get(url).subscribe(response => {\n      var json = JSON.parse((<any>response)._body);\n      console.log(\"Ouput: \"+json[0]);\n      let pos = { lat: parseFloat(json[0].lat), lng: parseFloat(json[0].lon) };\n      this.map.setCenter(pos);\n\n\n      var geojson = {\n                      \"type\": \"FeatureCollection\",\n                      \"features\": [\n                        {\n                          \"type\": \"Feature\",\n                          \"geometry\" : {\n                            \"type\": json[0].geojson.type,\n                            \"coordinates\": json[0].geojson.coordinates\n                          }\n                        }\n                      ]\n                    };\n\n      console.log(json);\n\n\n      console.log(\"Displaying coords: \"+json[0].geojson.coordinates[0].length);\n      if(json[0].geojson.coordinates[0].length!=1){\n        var coords=new Array();\n        var singleCoord=new Array;\n        var x;\n        for (x in json[0].geojson.coordinates[0]) {\n          singleCoord={\n            lat:json[0].geojson.coordinates[0][x][1],\n            lng:json[0].geojson.coordinates[0][x][0]\n          };\n          coords.push(singleCoord);\n          singleCoord=[];\n        }\n    }else{\n      var coords=new Array();\n      var singleCoord=new Array;\n      var x;\n      for (x in json[0].geojson.coordinates[0][0]) {\n        singleCoord={\n          lat:json[0].geojson.coordinates[0][0][x][1],\n          lng:json[0].geojson.coordinates[0][0][x][0]\n        };\n        coords.push(singleCoord);\n        singleCoord=[];\n      }\n    }\n\n      console.log(coords);\n\n      /*console.log(\"Trying editable now\");\n      var coords = new Array();\n      var x;\n      for (x in json[0].geojson.coordinates) {\n           var array = json[0].geojson.coordinates[x][0];\n           var y;\n           var array2 = new Array();\n           for (y in array) {\n             array2.push({\n               lat: array[y][1],\n               lng: array[y][0]\n             });\n           }\n        coords.push(array2);\n      }\n      console.log(\"The coords are \"+coords[0].lat);*/\n\n      var polygon = new google.maps.Polygon({\n          paths: coords,\n          strokeColor: '#00FFFF',\n          strokeOpacity: 0.8,\n          strokeWeight: 2,\n          fillColor: '#0000FF',\n          fillOpacity: 0.35,\n          editable: true\n        });\n      polygon.setMap(this.map);\n\n      /*var points=new Array();\n      for(var i=1;i<10;i++){\n      points.push(new google.maps.Circle({\n        strokeColor: '#FF0000',\n           strokeOpacity: 0.8,\n           strokeWeight: 2,\n           fillColor: '#FF0000',\n           fillOpacity: 0.00,\n           map: this.map,\n           center: coords[0],\n           radius: 1000*i\n      }));\n    }*/\n      //point.setMap(this.map);\n\n\n      //this.map.setCenter(coords[0]);\n      //this.map.data.addGeoJson(geojson);\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/conservation-area-create/conservation-area-create.ts"],"sourceRoot":""}